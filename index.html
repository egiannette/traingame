<!DOCTYPE html>
<html>
<head>
	<title>Train Game</title>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

	<script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>

	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

	<!-- Here is where I will add the firebase -->
</head>
<body>
	<div class="container">
		<div class="jumbotron">
			<h1 class="text-center">The Train Game
			</h1>

		<div class="row">
			<div class="col-lg-12"></div>
		</div>		

		</div>
		<div class="panel panel-default">
			<div class="panel heading">Current Train Schedule</div>
		</div>	

	<table class="table">
		<thead>
			<tr>
				<th>Train Name</th>
				<th>Destination</th>
				<th>Frequency</th>
				<th>Next Arrival</th>
				<th>Minutes Away</th>
			</tr>	
		</thead>
			<tbody>
				<tr>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						
				</tr>
			</tbody>
	</table>

		<div class="row">
			<div class="col-lg-12">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">Add Train</h3>
						
					</div>
					<div class="panel-body">
						<form>
							<div class="form group">
							<label for="nameinput">Train Name</label>
								<input type="text" class="form-control" id="nameinput">
							</div>
							<div class="form group">
							<label for="destinationinput">Destination</label>
								<input type="text" class="form-control" id="destinationinput">
							</div>
							<div class="form group">
								<label for="timeinput">First Train Time</label>
									<input type="text" class="form-control" id="timeinput">
							</div>
							<div class="form group">
								<label for="frequencyinput">Frequency min</label>
									<input type="text" class="form-control" id="frequencyinput">
							</div>
							<button type="submit" class="btn btn-primary" id="addTrainbtn">Submit</button>	
						</form>
					</div>
				</div>
			</div>
		</div>			
	</div>
	<script src="https://www.gstatic.com/firebasejs/3.4.0/firebase.js"></script>

	</body>
</html>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCQX8y7hk1DwA2xyWFyOYioMpMcXH8UJqY",
    authDomain: "the-train-game-268b0.firebaseapp.com",
    databaseURL: "https://the-train-game-268b0.firebaseio.com",
    storageBucket: "the-train-game-268b0.appspot.com",
    messagingSenderId: "1022520729057"
  };
  firebase.initializeApp(config);

  var database = firebase.database();

  // grabs user input
$("#addTrainbtn").on("click",function(){
	var trName = $("#nameinput").val().trim();
	var trDestination = $("#destinationinput").val().trim();
	var trTime = $("#timeinput").val().trim();
	var trFrequency = $("#frequencyinput").val().trim();

	// Creates local "temporary" object for holding employee data
	var newTrain = {
		name = trName,
		destination = trDestination,
		time = trTime,
		frequency = trFrequency
	}
	// uploats train data to the database
	database.ref().push(newTrain);

	// logs everything to console
	console.log(newTrain.name);
	console.log(newTrain.destination);
	console.log(newTrain.time);
	console.log(newTrain.frequency);

	// clears each text box
	$("#nameinput").val("");
	$("#destinationinput").val("");
	$("#timeinput").val("");
	$("#frequencyinput").val("");

	// Prevents moving to new page
	return false;
// Create Firebase event for adding train into to the database and a row in the html when a user adds an entry
database.ref().on("child_added", function(childSnapshot, prevChildKey){
	console.log(childSnapshot.val());

	// Store everything into a variable.
	var empName = childSnapshot.val().name;
	var empRole = childSnapshot.val().destination;
	var empStart = childSnapshot.val().time;
	var empRate = childSnapshot.val().frequency;

	// train info
	console.log(trName);
	console.log(trDestination);
	console.log(trTime);
	console.log(trFrequency);

</script>	
});




